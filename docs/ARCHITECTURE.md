# üèóÔ∏è DVC.AI System Architecture

## üéØ **Overview**

DVC.AI is built with a modern **microservice architecture** featuring:
- ü§ñ **LangGraph Agent** - Advanced AI workflow management
- üìö **RAG Pipeline** - Retrieval-Augmented Generation with vector search
- üèóÔ∏è **Modular Design** - Separation of concerns, scalable components
- üîÑ **Real-time Communication** - WebSocket integration
- üê≥ **Containerized Deployment** - Docker-based microservices

---

## üìä **High-Level Architecture**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Frontend      ‚îÇ    ‚îÇ   Users/Admins  ‚îÇ
‚îÇ   (React.js)    ‚îÇ    ‚îÇ                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚îÇ HTTP/WebSocket         ‚îÇ HTTP
          ‚îÇ                       ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ           API Gateway (FastAPI)          ‚îÇ
‚îÇ          + WebSocket Manager             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚îÇ                         ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Authentication ‚îÇ         ‚îÇ   Document   ‚îÇ
‚îÇ    Service     ‚îÇ         ‚îÇ   Service    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚îÇ                         ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ         Virtual Assistant Core           ‚îÇ
‚îÇ     (LangGraph + RAG Pipeline)           ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
          ‚îÇ                         ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Vector Search ‚îÇ         ‚îÇ  Conversation‚îÇ
‚îÇ   (Milvus)     ‚îÇ         ‚îÇ   Memory     ‚îÇ
‚îÇ                ‚îÇ         ‚îÇ  (MongoDB)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üß© **Microservice Components**

### **1. Frontend Service**
- **Technology**: React.js + Custom CSS + MaisonNeue font
- **Responsibilities**: 
  - User interface rendering
  - Real-time chat interface
  - Document management UI
  - Authentication flow

### **2. API Gateway (FastAPI)**
- **Entry Point**: All client requests
- **Features**:
  - Request routing
  - Authentication middleware
  - WebSocket management
  - CORS handling

### **3. Authentication Service**
```python
# app/api/auth.py + app/core/security.py
- JWT token management
- User session handling  
- Role-based access control
- Password hashing
```

### **4. Document Service**
```python
# app/api/documents.py + app/services/gcs_service.py
- File upload/download
- Document processing
- Metadata management
- Cloud storage integration
```

### **5. Virtual Assistant Core**
```python
# app/agent/ - LangGraph Agent Architecture
- Intelligent query routing
- RAG pipeline orchestration
- Conversation state management
- Response generation
```

---

## ü§ñ **LangGraph Agent Architecture**

### **Agent Workflow**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   User      ‚îÇ    ‚îÇ  Analyze    ‚îÇ    ‚îÇ Route       ‚îÇ
‚îÇ   Query     ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  Query      ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ Decision    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                              ‚îÇ
                        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                        ‚îÇ                     ‚îÇ                     ‚îÇ
                   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                   ‚îÇ Casual  ‚îÇ         ‚îÇ    RAG     ‚îÇ       ‚îÇ   Complex  ‚îÇ
                   ‚îÇ  Chat   ‚îÇ         ‚îÇ  Pipeline  ‚îÇ       ‚îÇ  Research  ‚îÇ
                   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ                    ‚îÇ                     ‚îÇ
                   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                   ‚îÇGeneric  ‚îÇ         ‚îÇ Retrieve   ‚îÇ       ‚îÇMulti-step  ‚îÇ
                   ‚îÇResponse ‚îÇ         ‚îÇDocuments   ‚îÇ       ‚îÇ Planning   ‚îÇ
                   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îò         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                        ‚îÇ                    ‚îÇ                     ‚îÇ
                        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                             ‚îÇ
                                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                    ‚îÇ Post Process &  ‚îÇ
                                    ‚îÇ Format Response ‚îÇ
                                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **Node Architecture**

#### **Routing Nodes**
```python
# app/agent/nodes/analyze_query.py
class AnalyzeQueryNode:
    """Ph√¢n t√≠ch query v√† quy·∫øt ƒë·ªãnh routing"""
    def analyze_intent(self, query: str) -> RoutingDecision
    def extract_context(self, messages: List[Message]) -> Context
```

#### **Transform Nodes**
```python
# app/agent/nodes/transform_query.py  
class TransformQueryNode:
    """C·∫£i thi·ªán query d·ª±a tr√™n context"""
    def enhance_query(self, query: str, context: Context) -> str
    def add_conversation_context(self, query: str) -> str
```

#### **Retrieval Nodes**
```python
# app/agent/nodes/retrieve.py
class RetrieveNode:
    """T√¨m ki·∫øm documents t·ª´ Milvus"""
    def semantic_search(self, query: str) -> List[Document]
    def rerank_results(self, documents: List[Document]) -> List[Document]
```

#### **Generation Nodes**
```python
# app/agent/nodes/context_generator.py
class ContextGeneratorNode:
    """T·∫°o response v·ªõi citations"""
    def generate_with_context(self, query: str, docs: List[Document]) -> Response
    def add_citations(self, response: str, sources: List[Document]) -> str

# app/agent/nodes/generic_response.py  
class GenericResponseNode:
    """Response ƒë∆°n gi·∫£n cho casual chat"""
    def generate_casual_response(self, query: str) -> Response
```

### **State Management**
```python
# app/agent/state.py
class InputState(TypedDict):
    messages: List[BaseMessage]
    session_id: str
    user_id: Optional[str]
    memories: Dict[str, Any]

class ChatState(InputState):
    better_query: str
    documents: List[Document]
    generation: str
    confidence: float
```

---

## üìö **RAG Pipeline Architecture**

### **Pipeline Flow**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Query     ‚îÇ    ‚îÇ Transform   ‚îÇ    ‚îÇ  Vector     ‚îÇ
‚îÇ Processing  ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   Query     ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ  Search     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                              ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Response   ‚îÇ    ‚îÇ Generate    ‚îÇ    ‚îÇ  Retrieve   ‚îÇ
‚îÇ Formation   ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÇ Response    ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÇ Documents   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **Components**

#### **1. Document Processing**
```python
# app/utils/document_processor.py
class DocumentProcessor:
    def chunk_documents(self, content: str) -> List[Chunk]
    def extract_metadata(self, file_path: str) -> DocumentMetadata
    def process_markdown(self, content: str) -> ProcessedDocument
```

#### **2. Vector Search**
```python
# app/services/milvus_service.py
class MilvusService:
    def embed_query(self, query: str) -> List[float]
    def search_similar(self, embedding: List[float]) -> List[Document]
    def store_embeddings(self, documents: List[Document]) -> bool
```

#### **3. Response Generation**
```python
# app/services/rag_service.py
class RAGService:
    def retrieve_context(self, query: str) -> List[Document]
    def generate_response(self, query: str, context: List[Document]) -> Response
    def validate_response(self, response: Response) -> bool
```

---

## üóÑÔ∏è **Data Architecture**

### **MongoDB Collections**
```javascript
// Users collection
{
  _id: ObjectId,
  email: String,
  hashed_password: String,
  created_at: Date,
  last_login: Date
}

// Documents collection  
{
  _id: ObjectId,
  filename: String,
  file_size: Number,
  upload_date: Date,
  user_id: ObjectId,
  gcs_path: String,
  processed: Boolean
}

// Conversations collection
{
  _id: ObjectId,
  session_id: String,
  user_id: ObjectId,
  messages: [
    {
      role: String, // "user" | "assistant"
      content: String,
      timestamp: Date,
      metadata: Object
    }
  ],
  created_at: Date,
  updated_at: Date
}
```

### **Milvus Schema**
```python
# Collection: document_embeddings
{
  "id": DataType.INT64,           # Primary key
  "file_name": DataType.VARCHAR,  # Source document
  "content": DataType.VARCHAR,    # Text chunk
  "title": DataType.VARCHAR,      # Document title
  "section": DataType.VARCHAR,    # Section title  
  "embedding": DataType.FLOAT_VECTOR  # 3072-dim vector
}
```

---

## üîÑ **Communication Patterns**

### **HTTP API Pattern**
```python
# Request/Response cycle
Client ‚îÄ‚îÄHTTP‚îÄ‚îÄ> API Gateway ‚îÄ‚îÄ> Service ‚îÄ‚îÄ> Database
                      ‚îÇ                         ‚îÇ
                      ‚îî‚îÄ‚îÄ Response ‚Üê‚îÄ‚îÄ Service ‚Üê‚îò
```

### **WebSocket Pattern**
```python
# Real-time communication
Client ‚îÄ‚îÄWebSocket‚îÄ‚îÄ> WebSocket Manager ‚îÄ‚îÄ> Agent ‚îÄ‚îÄ> RAG Pipeline
   ‚îÇ                         ‚îÇ                            ‚îÇ
   ‚îî‚îÄ‚îÄ Real-time updates ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ Status updates ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **Background Tasks**
```python
# Celery pattern  
API ‚îÄ‚îÄ> Queue ‚îÄ‚îÄ> Worker ‚îÄ‚îÄ> External Service
 ‚îÇ                  ‚îÇ            ‚îÇ
 ‚îî‚îÄ‚îÄ Task ID ‚Üê‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ Result ‚Üê‚îÄ‚îÄ‚îò
```

---

## üîê **Security Architecture**

### **Authentication Flow**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Login  ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ   Verify    ‚îÇ‚îÄ‚îÄ‚îÄ‚ñ∂‚îÇ Generate    ‚îÇ
‚îÇRequest  ‚îÇ    ‚îÇCredentials  ‚îÇ    ‚îÇJWT Token    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                          ‚îÇ
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇProtected‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÇ   Verify    ‚îÇ‚óÄ‚îÄ‚îÄ‚îÄ‚îÇ Send Token  ‚îÇ
‚îÇResource ‚îÇ    ‚îÇJWT Token    ‚îÇ    ‚îÇto Client    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **Access Control**
```python
# app/core/security.py
- JWT token validation
- Role-based permissions  
- API rate limiting
- CORS configuration
```

---

## üìà **Scalability Considerations**

### **Horizontal Scaling**
- **Frontend**: Multiple replicas behind load balancer
- **Backend**: Stateless API servers
- **Database**: MongoDB replica sets
- **Vector DB**: Milvus cluster mode

### **Performance Optimization**
- **Caching**: Redis for session and query caching
- **CDN**: Static asset delivery
- **Connection pooling**: Database connections
- **Async processing**: Background tasks

### **Monitoring Points**
- API response times
- Database query performance  
- Vector search latency
- Memory usage patterns
- Error rates

---

## üîÆ **Future Enhancements**

### **Planned Features**
- **Multi-tenant support**: Organization isolation
- **Advanced analytics**: Usage tracking and insights
- **Plugin system**: Extensible agent capabilities
- **Voice interface**: Speech-to-text integration
- **Mobile app**: React Native companion

### **Architecture Evolution**
- **Event sourcing**: Audit trail and replay capability
- **CQRS pattern**: Command/Query responsibility segregation
- **Service mesh**: Enhanced inter-service communication
- **Kubernetes**: Container orchestration

---

*This architecture supports both current needs and future growth while maintaining code quality and system reliability.*
